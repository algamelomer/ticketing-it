import{T as _,s as x,l as $,p as U,o as y,c as S,w as i,a as n,d as w,u as e,b as m,e as A,f as O,F as C,q as L,j as N,t as T,x as j,y as k,k as E,r as F}from"./app-Doew6ZCh.js";import{u as V,_ as D}from"./BaseModal-C7aJHn0u.js";import{_ as R,a as H}from"./BaseRadio-BGV9VGOW.js";import{_ as c}from"./BaseInput-B7XT_GqB.js";import{_ as b}from"./BaseButton-wvLPRI0d.js";import"./BasePagination-V4q61FIM.js";import"./index-Bb4qSo10.js";const J=m("h3",{class:"text-lg font-medium text-gray-900"}," Add user ",-1),I=m("label",{class:"block mb-2 text-sm font-medium text-gray-900"}," Role ",-1),P={class:"flex flex-wrap gap-4"},z={class:"flex-1"},G={__name:"CreateUserModal",setup(v){const s=_({name:"",email:"",role:"user",password:"",password_confirmation:""}),r=[{id:"create-user-role-admin",value:"admin",label:"Admin"},{id:"create-user-role-agent",value:"agent",label:"Agent"},{id:"create-user-role-user",value:"user",label:"User"}],g=V(),{createUserModalOpen:d}=x(g);function p(){s.post(route("users.store"),{preserveScroll:!0,onSuccess:()=>{d.value=!1,E().add({type:"success",message:"User created successfully"}),s.reset()}})}const f=$(null);return U(d,u=>{u&&setTimeout(()=>{f.value.focus()},0)}),(u,o)=>(y(),S(D,{"is-open":e(d),"onUpdate:isOpen":o[10]||(o[10]=l=>k(d)?d.value=l:null),onOnClose:o[11]||(o[11]=l=>d.value=!1)},{header:i(()=>[J]),footer:i(()=>[n(b,{variant:"secondary",onClick:o[9]||(o[9]=l=>d.value=!1)},{default:i(()=>[w(" Cancel ")]),_:1}),n(b,{form:"create-user-form",type:"submit",isLoading:e(s).processing},{default:i(()=>[w(" Create ")]),_:1},8,["isLoading"])]),default:i(()=>[m("form",{id:"create-user-form",class:"grid gap-4",novalidate:"",onSubmit:A(p,["prevent"])},[n(c,{ref_key:"input",ref:f,label:"Name",id:"create-user-name",type:"text",placeholder:"John Doe",modelValue:e(s).name,"onUpdate:modelValue":o[0]||(o[0]=l=>e(s).name=l),"error-message":e(s).errors.name,onFocus:o[1]||(o[1]=l=>e(s).clearErrors("name"))},null,8,["modelValue","error-message"]),n(c,{label:"Email",id:"create-user-email",placeholder:"youremail@domain.com",type:"email",modelValue:e(s).email,"onUpdate:modelValue":o[2]||(o[2]=l=>e(s).email=l),"error-message":e(s).errors.email,onFocus:o[3]||(o[3]=l=>e(s).clearErrors("email"))},null,8,["modelValue","error-message"]),n(c,{label:"Password",id:"create-user-password",placeholder:"••••••••",type:"password",modelValue:e(s).password,"onUpdate:modelValue":o[4]||(o[4]=l=>e(s).password=l),autocomplete:"new-password","error-message":e(s).errors.password,onFocus:o[5]||(o[5]=l=>e(s).clearErrors("password"))},null,8,["modelValue","error-message"]),n(c,{label:"Confirm password",id:"create-user-confirm-password",placeholder:"••••••••",type:"password",modelValue:e(s).password_confirmation,"onUpdate:modelValue":o[6]||(o[6]=l=>e(s).password_confirmation=l),autocomplete:"new-password","error-message":e(s).errors.password_confirmation,onFocus:o[7]||(o[7]=l=>e(s).clearErrors("confirm-password"))},null,8,["modelValue","error-message"]),m("div",null,[I,m("div",P,[(y(),O(C,null,L(r,l=>m("div",z,[n(R,{modelValue:e(s).role,"onUpdate:modelValue":o[8]||(o[8]=t=>e(s).role=t),option:l},null,8,["modelValue","option"])])),64))]),N(m("p",{class:"mt-2 text-sm text-red-600"},T(e(s).errors.role),513),[[j,e(s).errors.role]])])],32)]),_:1},8,["is-open"]))}},K=m("h3",{class:"text-lg font-medium text-gray-900"}," Edit user ",-1),Q=m("label",{class:"block mb-2 text-sm font-medium text-gray-900"}," Role ",-1),W={class:"flex flex-wrap gap-4"},X={class:"flex-1"},Y={__name:"EditUserModal",props:{user:{type:[Object],required:!0}},setup(v){var o;const s=v;let r=_({...s.user,role:(o=s==null?void 0:s.user)==null?void 0:o.roles,password:"",password_confirmation:""});U(()=>s.user,l=>{var t;r.defaults({...l,role:(t=s==null?void 0:s.user)==null?void 0:t.roles}).reset()});const g=[{id:"edit-user-role-admin",value:"admin",label:"Admin"},{id:"edit-user-role-agent",value:"agent",label:"Agent"},{id:"edit-user-role-user",value:"user",label:"User"}],d=V(),{editUserModalOpen:p}=x(d);function f(){const l=route("users.update",{user:s.user});r.patch(l,{preserveScroll:!0,onSuccess:()=>{p.value=!1,E().add({type:"success",message:"User updated successfully"}),r.reset()}})}const u=$(null);return U(p,l=>{l&&setTimeout(()=>{u.value.focus()},0)}),(l,t)=>(y(),S(D,{"is-open":e(p),"onUpdate:isOpen":t[10]||(t[10]=a=>k(p)?p.value=a:null),onOnClose:t[11]||(t[11]=a=>p.value=!1)},{header:i(()=>[K]),footer:i(()=>[n(b,{variant:"secondary",onClick:t[9]||(t[9]=a=>p.value=!1)},{default:i(()=>[w(" Cancel ")]),_:1}),n(b,{form:"edit-user-form",type:"submit",isLoading:e(r).processing},{default:i(()=>[w(" Save ")]),_:1},8,["isLoading"])]),default:i(()=>[m("form",{id:"edit-user-form",class:"grid gap-4",novalidate:"",onSubmit:A(f,["prevent"])},[n(c,{ref_key:"input",ref:u,label:"Name",id:"edit-user-name",type:"text",placeholder:"John Doe",modelValue:e(r).name,"onUpdate:modelValue":t[0]||(t[0]=a=>e(r).name=a),"error-message":e(r).errors.name,onFocus:t[1]||(t[1]=a=>e(r).clearErrors("name"))},null,8,["modelValue","error-message"]),n(c,{label:"Email",id:"edit-user-email",placeholder:"youremail@domain.com",type:"email",modelValue:e(r).email,"onUpdate:modelValue":t[2]||(t[2]=a=>e(r).email=a),"error-message":e(r).errors.email,onFocus:t[3]||(t[3]=a=>e(r).clearErrors("email"))},null,8,["modelValue","error-message"]),n(c,{label:"New password",id:"edit-user-password",placeholder:"••••••••",type:"password",modelValue:e(r).password,"onUpdate:modelValue":t[4]||(t[4]=a=>e(r).password=a),autocomplete:"new-password","error-message":e(r).errors.password,onFocus:t[5]||(t[5]=a=>e(r).clearErrors("password"))},null,8,["modelValue","error-message"]),n(c,{label:"Confirm password",id:"edit-user-confirm-password",placeholder:"••••••••",type:"password",modelValue:e(r).password_confirmation,"onUpdate:modelValue":t[6]||(t[6]=a=>e(r).password_confirmation=a),autocomplete:"new-password","error-message":e(r).errors.password_confirmation,onFocus:t[7]||(t[7]=a=>e(r).clearErrors("confirm-password"))},null,8,["modelValue","error-message"]),m("div",null,[Q,m("div",W,[(y(),O(C,null,L(g,a=>m("div",X,[n(R,{modelValue:e(r).role,"onUpdate:modelValue":t[8]||(t[8]=M=>e(r).role=M),option:a},null,8,["modelValue","option"])])),64))]),N(m("p",{class:"mt-2 text-sm text-red-600"},T(e(r).errors.role),513),[[j,e(r).errors.role]])])],32)]),_:1},8,["is-open"]))}},Z=m("h3",{class:"text-lg font-medium text-gray-900"}," Delete user ",-1),h=m("div",null,[m("p",{class:"text-sm text-gray-500"}," This action cannot be undone. Do you want to proceed with the deletion? ")],-1),ee={__name:"DeleteUserModal",props:{user:{type:[Object],required:!0,default:()=>({name:"",email:"",role:""})}},setup(v){const s=v,r=_({}),g=V(),{deleteUserModalOpen:d}=x(g);function p(){const f=route("users.destroy",{user:s.user});r.delete(f,{preserveScroll:!0,onSuccess:()=>{d.value=!1,E().add({type:"success",message:"User deleted successfully"}),r.reset()}})}return(f,u)=>(y(),S(D,{"is-open":e(d),"onUpdate:isOpen":u[1]||(u[1]=o=>k(d)?d.value=o:null),onOnClose:u[2]||(u[2]=o=>d.value=!1)},{header:i(()=>[Z]),footer:i(()=>[n(b,{variant:"secondary",onClick:u[0]||(u[0]=o=>d.value=!1)},{default:i(()=>[w(" Cancel ")]),_:1}),n(b,{onClick:p,variant:"danger",class:"ms-3","is-loading":e(r).processing},{default:i(()=>[w(" Delete ")]),_:1},8,["is-loading"])]),default:i(()=>[h]),_:1},8,["is-open"]))}},de={__name:"Index",props:{users:{type:[Object],default:()=>[]},filters:{type:[Object]}},setup(v){const s=[{label:"Name",key:"name"},{label:"Email",key:"email"},{label:"Role",key:"roles"},{label:"Actions",key:"actions"}],r=V(),{createUserModalOpen:g,editUserModalOpen:d,deleteUserModalOpen:p}=x(r),f=$();function u(a){f.value=a}function o(){g.value=!0}function l(a){d.value=!0,u(a)}function t(a){p.value=!0,u(a)}return(a,M)=>{const B=F("Head"),q=F("AuthenticatedLayout");return y(),O(C,null,[n(B,{title:"Users"}),n(q,null,{default:i(()=>[n(H,{"table-id":"users",placeholder:"Search",headers:s,data:v.users,route:"users.index",filters:v.filters,onOnCreate:o,onOnEdit:l,onOnDelete:t},{button:i(()=>[w(" Add ")]),_:1},8,["data","filters"])]),_:1}),n(e(G)),n(e(Y),{user:f.value},null,8,["user"]),n(e(ee),{user:f.value},null,8,["user"])],64)}}};export{de as default};

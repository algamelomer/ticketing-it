import{o as h,f as C,C as Ve,i as T,Q as Le,D as Ee,l as L,b as f,j as z,E as De,a as w,w as V,u as d,F as N,q as W,x as te,O as Ye,t as M,d as U,n as q,c as Q,G as pe,H as oe,I as le,J as Je,K as de,L as Y,M as _e,p as Z,N as Xe,P as A,R as B,m as Pe,h as je,B as et,g as Me,S as Ae,T as fe,s as ne,e as Ne,y as me,k as ve,r as he}from"./app-Doew6ZCh.js";import{w as tt,u as ae,_ as be}from"./BaseModal-C7aJHn0u.js";import{_ as H}from"./BaseButton-wvLPRI0d.js";import{_ as lt}from"./BasePagination-V4q61FIM.js";import{_ as Re}from"./BaseInput-B7XT_GqB.js";import{c as Fe}from"./index-Bb4qSo10.js";const ot=(e,t)=>{const l=e.__vccOpts||e;for(const[r,a]of t)l[r]=a;return l},nt={},at={class:"antialiased inline-flex gap-2 text-xs bg-gray-100 cursor-pointer min-w-max text-gray-800 font-medium px-2.5 py-0.5 rounded-md transition duration-300 border border-gray-300"};function rt(e,t){return h(),C("span",at,[Ve(e.$slots,"default")])}const st=ot(nt,[["render",rt]]),it={class:"relative px-6 pt-4 pb-6 overflow-x-auto bg-white shadow-sm sm:rounded-lg"},ut={class:"flex flex-wrap items-baseline justify-between gap-4 pb-4 bg-white"},dt=["for"],ct={class:"relative mt-1"},pt=f("div",{class:"absolute inset-y-0 flex items-center pointer-events-none rtl:inset-r-0 start-0 ps-3"},[f("svg",{class:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[f("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})])],-1),ft=["id","placeholder"],mt=f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4"},[f("path",{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.75-10.25v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0Z","clip-rule":"evenodd"})],-1),vt={class:"w-full text-sm text-left text-gray-500"},bt={class:"text-xs text-gray-700 uppercase bg-gray-50"},gt={class:"bg-white border-b"},yt=["colspan"],xt={key:0,class:"px-6 py-4 text-gray-900 min-w-[150px] text-balance"},kt={key:1,class:"px-6"},ht={class:"flex items-center"},wt={key:0,class:"h-2.5 w-2.5 rounded-full bg-green-400 mr-2"},Ot={key:1,class:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"},$t={key:2,class:"text-center"},St={key:0,class:"bg-green-100 text-green-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded-full"},Ct={key:1,class:"bg-yellow text-black text-sm font-medium me-2 px-2.5 py-0.5 rounded-full border border-yellow"},Tt={key:2,class:"bg-red-100 text-red-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded-full"},Vt={key:3,class:"px-6 py-4"},Lt={class:"flex flex-wrap gap-4"},Et=["disabled","aria-disabled","onClick"],Dt=["disabled","aria-disabled","onClick"],_t={key:4,class:"px-6 py-4 text-gray-900"},Pt={class:"flex flex-wrap gap-3"},jt={key:5,class:"px-6 py-4 text-center text-gray-900"},Mt={key:6,class:"max-w-[180px] px-6 py-4 text-gray-900 truncate"},At={__name:"BaseTable",props:{tableId:{type:[String,Number],required:!0},headers:{type:[Object],required:!0,default:()=>[]},data:{type:[Object],required:!0,default:()=>{}},filters:{type:[Object]},placeholder:{type:[String]},route:{type:[String],required:!0}},emits:["onCreate","onEdit","onDelete"],setup(e,{emit:t}){var b;const l=e,r=T(()=>Le().props.auth.permissions),{hasPermission:a}=Ee({permissions:r.value}),n=a.value("create-tickets"),o=a.value("edit-tickets"),c=a.value("delete-tickets"),m=L((b=l.filters)==null?void 0:b.search);return tt(m,v=>{Ye.get(route(l.route),{search:v},{replace:!0,preserveState:!0})},{debounce:300}),(v,u)=>{var i,y,S;return h(),C("div",it,[f("div",ut,[f("label",{for:`${e.tableId}-table-search`,class:"sr-only"},"Search",8,dt),f("div",ct,[pt,z(f("input",{type:"text",id:`${e.tableId}-table-search`,"onUpdate:modelValue":u[0]||(u[0]=g=>m.value=g),class:"block pt-2 text-sm text-gray-900 border border-gray-300 rounded-lg ps-10 w-80 bg-gray-50 focus:ring-black focus:border-black",placeholder:e.placeholder},null,8,ft),[[De,m.value]])]),w(H,{"is-disabled":!d(n),"aria-disabled":!d(n),onClick:u[1]||(u[1]=g=>v.$emit("onCreate"))},{icon:V(()=>[mt]),default:V(()=>[Ve(v.$slots,"button")]),_:3},8,["is-disabled","aria-disabled"])]),f("table",vt,[f("thead",bt,[f("tr",null,[(h(!0),C(N,null,W(e.headers,({label:g,key:x})=>(h(),C("th",{key:x,scope:"col",class:"px-6 py-3 text-nowrap"},M(g),1))),128))])]),f("tbody",null,[z(f("tr",gt,[f("td",{colspan:e.headers.length,class:"px-6 py-4 text-center text-gray-900"}," No records found ",8,yt)],512),[[te,!((y=(i=e.data)==null?void 0:i.data)!=null&&y.length)]]),(h(!0),C(N,null,W((S=e.data)==null?void 0:S.data,g=>(h(),C("tr",{key:g,class:"border-b even:bg-white odd:bg-gray-50"},[(h(!0),C(N,null,W(e.headers,x=>{var P;return h(),C(N,{key:x.key},[x.key.includes("title")?(h(),C("td",xt,M(g[x.key]),1)):x.key.includes("status")?(h(),C("td",kt,[f("div",ht,[g[x.key].includes("open")?(h(),C("span",wt)):(h(),C("span",Ot)),U(" "+M(g[x.key]),1)])])):x.key.includes("priority")?(h(),C("td",$t,[g[x.key].includes("low")?(h(),C("span",St,M(g[x.key]),1)):g[x.key].includes("medium")?(h(),C("span",Ct,M(g[x.key]),1)):(h(),C("span",Tt,M(g[x.key]),1))])):x.key.includes("actions")?(h(),C("td",Vt,[f("div",Lt,[f("a",{disabled:!d(o),"aria-disabled":!d(o),class:q([{"cursor-not-allowed pointer-events-none opacity-50":!d(o)},"font-medium text-gray-900 hover:underline"]),href:"#",type:"button",onClick:$=>v.$emit("onEdit",g)},"Edit ",10,Et),f("a",{disabled:!d(c),"aria-disabled":!d(c),class:q([{"cursor-not-allowed pointer-events-none opacity-50":!d(c)},"font-medium text-red-600 hover:underline"]),href:"#",type:"button",onClick:$=>v.$emit("onDelete",g)},"Delete ",10,Dt)])])):Array.isArray(g[x.key])?(h(),C("td",_t,[f("div",Pt,[(h(!0),C(N,null,W(g[x.key],({title:$})=>(h(),Q(st,{key:v.key},{default:V(()=>[U(M($),1)]),_:2},1024))),128))])])):x.key.includes("agent")?(h(),C("td",jt,M(((P=g[x.key])==null?void 0:P.name)??"Unassigned"),1)):(h(),C("td",Mt,M(g[x.key]),1))],64)}),128))]))),128))])]),w(lt,{data:e.data},null,8,["data"])])}}};function Nt(e,t,l){let r=L(l==null?void 0:l.value),a=T(()=>e.value!==void 0);return[T(()=>a.value?e.value:r.value),function(n){return a.value||(r.value=n),t==null?void 0:t(n)}]}let Rt=Symbol("headlessui.useid"),Ft=0;function ge(){return pe(Rt,()=>`${++Ft}`)()}function E(e){var t;if(e==null||e.value==null)return null;let l=(t=e.value.$el)!=null?t:e.value;return l instanceof Node?l:null}function R(e,t,...l){if(e in t){let a=t[e];return typeof a=="function"?a(...l):a}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,R),r}var It=Object.defineProperty,Ut=(e,t,l)=>t in e?It(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,we=(e,t,l)=>(Ut(e,typeof t!="symbol"?t+"":t,l),l);let Bt=class{constructor(){we(this,"current",this.detect()),we(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},ye=new Bt;function Ht(e){if(ye.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=E(e);if(t)return t.ownerDocument}return document}let Oe=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var qt=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(qt||{}),zt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(zt||{}),Kt=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Kt||{}),xe=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(xe||{});function Ie(e,t=0){var l;return e===((l=Ht(e))==null?void 0:l.body)?!1:R(t,{0(){return e.matches(Oe)},1(){let r=e;for(;r!==null;){if(r.matches(Oe))return!0;r=r.parentElement}return!1}})}var Wt=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Wt||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Zt(e,t=l=>l){return e.slice().sort((l,r)=>{let a=t(l),n=t(r);if(a===null||n===null)return 0;let o=a.compareDocumentPosition(n);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Gt(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Qt(){return/Android/gi.test(window.navigator.userAgent)}function Yt(){return Gt()||Qt()}function ee(e,t,l){ye.isServer||oe(r=>{document.addEventListener(e,t,l),r(()=>document.removeEventListener(e,t,l))})}function Jt(e,t,l){ye.isServer||oe(r=>{window.addEventListener(e,t,l),r(()=>window.removeEventListener(e,t,l))})}function Xt(e,t,l=T(()=>!0)){function r(n,o){if(!l.value||n.defaultPrevented)return;let c=o(n);if(c===null||!c.getRootNode().contains(c))return;let m=function b(v){return typeof v=="function"?b(v()):Array.isArray(v)||v instanceof Set?v:[v]}(e);for(let b of m){if(b===null)continue;let v=b instanceof HTMLElement?b:E(b);if(v!=null&&v.contains(c)||n.composed&&n.composedPath().includes(v))return}return!Ie(c,xe.Loose)&&c.tabIndex!==-1&&n.preventDefault(),t(n,c)}let a=L(null);ee("pointerdown",n=>{var o,c;l.value&&(a.value=((c=(o=n.composedPath)==null?void 0:o.call(n))==null?void 0:c[0])||n.target)},!0),ee("mousedown",n=>{var o,c;l.value&&(a.value=((c=(o=n.composedPath)==null?void 0:o.call(n))==null?void 0:c[0])||n.target)},!0),ee("click",n=>{Yt()||a.value&&(r(n,()=>a.value),a.value=null)},!0),ee("touchend",n=>r(n,()=>n.target instanceof HTMLElement?n.target:null),!0),Jt("blur",n=>r(n,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function $e(e,t){if(e)return e;let l=t??"button";if(typeof l=="string"&&l.toLowerCase()==="button")return"button"}function el(e,t){let l=L($e(e.value.type,e.value.as));return le(()=>{l.value=$e(e.value.type,e.value.as)}),oe(()=>{var r;l.value||E(t)&&E(t)instanceof HTMLButtonElement&&!((r=E(t))!=null&&r.hasAttribute("type"))&&(l.value="button")}),l}function Se(e){return[e.screenX,e.screenY]}function tl(){let e=L([-1,-1]);return{wasMoved(t){let l=Se(t);return e.value[0]===l[0]&&e.value[1]===l[1]?!1:(e.value=l,!0)},update(t){e.value=Se(t)}}}var ce=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(ce||{}),ll=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ll||{});function J({visible:e=!0,features:t=0,ourProps:l,theirProps:r,...a}){var n;let o=Be(r,l),c=Object.assign(a,{props:o});if(e||t&2&&o.static)return ue(c);if(t&1){let m=(n=o.unmount)==null||n?0:1;return R(m,{0(){return null},1(){return ue({...a,props:{...o,hidden:!0,style:{display:"none"}}})}})}return ue(c)}function ue({props:e,attrs:t,slots:l,slot:r,name:a}){var n,o;let{as:c,...m}=He(e,["unmount","static"]),b=(n=l.default)==null?void 0:n.call(l,r),v={};if(r){let u=!1,i=[];for(let[y,S]of Object.entries(r))typeof S=="boolean"&&(u=!0),S===!0&&i.push(y);u&&(v["data-headlessui-state"]=i.join(" "))}if(c==="template"){if(b=Ue(b??[]),Object.keys(m).length>0||Object.keys(t).length>0){let[u,...i]=b??[];if(!nl(u)||i.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${a} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(m).concat(Object.keys(t)).map(g=>g.trim()).filter((g,x,P)=>P.indexOf(g)===x).sort((g,x)=>g.localeCompare(x)).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let y=Be((o=u.props)!=null?o:{},m,v),S=Je(u,y,!0);for(let g in y)g.startsWith("on")&&(S.props||(S.props={}),S.props[g]=y[g]);return S}return Array.isArray(b)&&b.length===1?b[0]:b}return de(c,Object.assign({},m,v),{default:()=>b})}function Ue(e){return e.flatMap(t=>t.type===N?Ue(t.children):[t])}function Be(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},l={};for(let r of e)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(l[a]!=null||(l[a]=[]),l[a].push(r[a])):t[a]=r[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(l).map(r=>[r,void 0])));for(let r in l)Object.assign(t,{[r](a,...n){let o=l[r];for(let c of o){if(a instanceof Event&&a.defaultPrevented)return;c(a,...n)}}});return t}function ol(e){let t=Object.assign({},e);for(let l in t)t[l]===void 0&&delete t[l];return t}function He(e,t=[]){let l=Object.assign({},e);for(let r of t)r in l&&delete l[r];return l}function nl(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var qe=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(qe||{});let al=Y({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:l}){return()=>{var r;let{features:a,...n}=e,o={"aria-hidden":(a&2)===2?!0:(r=n["aria-hidden"])!=null?r:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(a&4)===4&&(a&2)!==2&&{display:"none"}}};return J({ourProps:o,theirProps:n,slot:{},attrs:l,slots:t,name:"Hidden"})}}}),ze=Symbol("Context");var G=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(G||{});function rl(){return pe(ze,null)}function sl(e){_e(ze,e)}var D=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(D||{});function il(e){throw new Error("Unexpected object: "+e)}var j=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(j||{});function ul(e,t){let l=t.resolveItems();if(l.length<=0)return null;let r=t.resolveActiveIndex(),a=r??-1;switch(e.focus){case 0:{for(let n=0;n<l.length;++n)if(!t.resolveDisabled(l[n],n,l))return n;return r}case 1:{a===-1&&(a=l.length);for(let n=a-1;n>=0;--n)if(!t.resolveDisabled(l[n],n,l))return n;return r}case 2:{for(let n=a+1;n<l.length;++n)if(!t.resolveDisabled(l[n],n,l))return n;return r}case 3:{for(let n=l.length-1;n>=0;--n)if(!t.resolveDisabled(l[n],n,l))return n;return r}case 4:{for(let n=0;n<l.length;++n)if(t.resolveId(l[n],n,l)===e.id)return n;return r}case 5:return null;default:il(e)}}function Ke(e={},t=null,l=[]){for(let[r,a]of Object.entries(e))Ze(l,We(t,r),a);return l}function We(e,t){return e?e+"["+t+"]":t}function Ze(e,t,l){if(Array.isArray(l))for(let[r,a]of l.entries())Ze(e,We(t,r.toString()),a);else l instanceof Date?e.push([t,l.toISOString()]):typeof l=="boolean"?e.push([t,l?"1":"0"]):typeof l=="string"?e.push([t,l]):typeof l=="number"?e.push([t,`${l}`]):l==null?e.push([t,""]):Ke(l,t,e)}let Ce=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Te(e){var t,l;let r=(t=e.innerText)!=null?t:"",a=e.cloneNode(!0);if(!(a instanceof HTMLElement))return r;let n=!1;for(let c of a.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))c.remove(),n=!0;let o=n?(l=a.innerText)!=null?l:"":r;return Ce.test(o)&&(o=o.replace(Ce,"")),o}function dl(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let l=e.getAttribute("aria-labelledby");if(l){let r=l.split(" ").map(a=>{let n=document.getElementById(a);if(n){let o=n.getAttribute("aria-label");return typeof o=="string"?o.trim():Te(n).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return Te(e).trim()}function cl(e){let t=L(""),l=L("");return()=>{let r=E(e);if(!r)return"";let a=r.innerText;if(t.value===a)return l.value;let n=dl(r).trim().toLowerCase();return t.value=a,l.value=n,n}}function pl(e,t){return e===t}var fl=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(fl||{}),ml=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(ml||{}),vl=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(vl||{});function bl(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Ge=Symbol("ListboxContext");function re(e){let t=pe(Ge,null);if(t===null){let l=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,re),l}return t}let gl=Y({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>pl},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:l,emit:r}){let a=L(1),n=L(null),o=L(null),c=L(null),m=L([]),b=L(""),v=L(null),u=L(1);function i(s=p=>p){let p=v.value!==null?m.value[v.value]:null,k=Zt(s(m.value.slice()),_=>E(_.dataRef.domRef)),O=p?k.indexOf(p):null;return O===-1&&(O=null),{options:k,activeOptionIndex:O}}let y=T(()=>e.multiple?1:0),[S,g]=Nt(T(()=>e.modelValue),s=>r("update:modelValue",s),T(()=>e.defaultValue)),x=T(()=>S.value===void 0?R(y.value,{1:[],0:void 0}):S.value),P={listboxState:a,value:x,mode:y,compare(s,p){if(typeof e.by=="string"){let k=e.by;return(s==null?void 0:s[k])===(p==null?void 0:p[k])}return e.by(s,p)},orientation:T(()=>e.horizontal?"horizontal":"vertical"),labelRef:n,buttonRef:o,optionsRef:c,disabled:T(()=>e.disabled),options:m,searchQuery:b,activeOptionIndex:v,activationTrigger:u,closeListbox(){e.disabled||a.value!==1&&(a.value=1,v.value=null)},openListbox(){e.disabled||a.value!==0&&(a.value=0)},goToOption(s,p,k){if(e.disabled||a.value===1)return;let O=i(),_=ul(s===j.Specific?{focus:j.Specific,id:p}:{focus:s},{resolveItems:()=>O.options,resolveActiveIndex:()=>O.activeOptionIndex,resolveId:F=>F.id,resolveDisabled:F=>F.dataRef.disabled});b.value="",v.value=_,u.value=k??1,m.value=O.options},search(s){if(e.disabled||a.value===1)return;let p=b.value!==""?0:1;b.value+=s.toLowerCase();let k=(v.value!==null?m.value.slice(v.value+p).concat(m.value.slice(0,v.value+p)):m.value).find(_=>_.dataRef.textValue.startsWith(b.value)&&!_.dataRef.disabled),O=k?m.value.indexOf(k):-1;O===-1||O===v.value||(v.value=O,u.value=1)},clearSearch(){e.disabled||a.value!==1&&b.value!==""&&(b.value="")},registerOption(s,p){let k=i(O=>[...O,{id:s,dataRef:p}]);m.value=k.options,v.value=k.activeOptionIndex},unregisterOption(s){let p=i(k=>{let O=k.findIndex(_=>_.id===s);return O!==-1&&k.splice(O,1),k});m.value=p.options,v.value=p.activeOptionIndex,u.value=1},theirOnChange(s){e.disabled||g(s)},select(s){e.disabled||g(R(y.value,{0:()=>s,1:()=>{let p=A(P.value.value).slice(),k=A(s),O=p.findIndex(_=>P.compare(k,A(_)));return O===-1?p.push(k):p.splice(O,1),p}}))}};Xt([o,c],(s,p)=>{var k;P.closeListbox(),Ie(p,xe.Loose)||(s.preventDefault(),(k=E(o))==null||k.focus())},T(()=>a.value===0)),_e(Ge,P),sl(T(()=>R(a.value,{0:G.Open,1:G.Closed})));let $=T(()=>{var s;return(s=E(o))==null?void 0:s.closest("form")});return le(()=>{Z([$],()=>{if(!$.value||e.defaultValue===void 0)return;function s(){P.theirOnChange(e.defaultValue)}return $.value.addEventListener("reset",s),()=>{var p;(p=$.value)==null||p.removeEventListener("reset",s)}},{immediate:!0})}),()=>{let{name:s,modelValue:p,disabled:k,form:O,..._}=e,F={open:a.value===0,disabled:k,value:x.value};return de(N,[...s!=null&&x.value!=null?Ke({[s]:x.value}).map(([K,X])=>de(al,ol({features:qe.Hidden,key:K,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:O,name:K,value:X}))):[],J({ourProps:{},theirProps:{...l,...He(_,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:F,slots:t,attrs:l,name:"Listbox"})])}}}),yl=Y({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:t,slots:l,expose:r}){var a;let n=(a=e.id)!=null?a:`headlessui-listbox-button-${ge()}`,o=re("ListboxButton");r({el:o.buttonRef,$el:o.buttonRef});function c(u){switch(u.key){case D.Space:case D.Enter:case D.ArrowDown:u.preventDefault(),o.openListbox(),B(()=>{var i;(i=E(o.optionsRef))==null||i.focus({preventScroll:!0}),o.value.value||o.goToOption(j.First)});break;case D.ArrowUp:u.preventDefault(),o.openListbox(),B(()=>{var i;(i=E(o.optionsRef))==null||i.focus({preventScroll:!0}),o.value.value||o.goToOption(j.Last)});break}}function m(u){switch(u.key){case D.Space:u.preventDefault();break}}function b(u){o.disabled.value||(o.listboxState.value===0?(o.closeListbox(),B(()=>{var i;return(i=E(o.buttonRef))==null?void 0:i.focus({preventScroll:!0})})):(u.preventDefault(),o.openListbox(),bl(()=>{var i;return(i=E(o.optionsRef))==null?void 0:i.focus({preventScroll:!0})})))}let v=el(T(()=>({as:e.as,type:t.type})),o.buttonRef);return()=>{var u,i;let y={open:o.listboxState.value===0,disabled:o.disabled.value,value:o.value.value},{...S}=e,g={ref:o.buttonRef,id:n,type:v.value,"aria-haspopup":"listbox","aria-controls":(u=E(o.optionsRef))==null?void 0:u.id,"aria-expanded":o.listboxState.value===0,"aria-labelledby":o.labelRef.value?[(i=E(o.labelRef))==null?void 0:i.id,n].join(" "):void 0,disabled:o.disabled.value===!0?!0:void 0,onKeydown:c,onKeyup:m,onClick:b};return J({ourProps:g,theirProps:S,slot:y,attrs:t,slots:l,name:"ListboxButton"})}}}),xl=Y({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:t,slots:l,expose:r}){var a;let n=(a=e.id)!=null?a:`headlessui-listbox-options-${ge()}`,o=re("ListboxOptions"),c=L(null);r({el:o.optionsRef,$el:o.optionsRef});function m(u){switch(c.value&&clearTimeout(c.value),u.key){case D.Space:if(o.searchQuery.value!=="")return u.preventDefault(),u.stopPropagation(),o.search(u.key);case D.Enter:if(u.preventDefault(),u.stopPropagation(),o.activeOptionIndex.value!==null){let i=o.options.value[o.activeOptionIndex.value];o.select(i.dataRef.value)}o.mode.value===0&&(o.closeListbox(),B(()=>{var i;return(i=E(o.buttonRef))==null?void 0:i.focus({preventScroll:!0})}));break;case R(o.orientation.value,{vertical:D.ArrowDown,horizontal:D.ArrowRight}):return u.preventDefault(),u.stopPropagation(),o.goToOption(j.Next);case R(o.orientation.value,{vertical:D.ArrowUp,horizontal:D.ArrowLeft}):return u.preventDefault(),u.stopPropagation(),o.goToOption(j.Previous);case D.Home:case D.PageUp:return u.preventDefault(),u.stopPropagation(),o.goToOption(j.First);case D.End:case D.PageDown:return u.preventDefault(),u.stopPropagation(),o.goToOption(j.Last);case D.Escape:u.preventDefault(),u.stopPropagation(),o.closeListbox(),B(()=>{var i;return(i=E(o.buttonRef))==null?void 0:i.focus({preventScroll:!0})});break;case D.Tab:u.preventDefault(),u.stopPropagation();break;default:u.key.length===1&&(o.search(u.key),c.value=setTimeout(()=>o.clearSearch(),350));break}}let b=rl(),v=T(()=>b!==null?(b.value&G.Open)===G.Open:o.listboxState.value===0);return()=>{var u,i;let y={open:o.listboxState.value===0},{...S}=e,g={"aria-activedescendant":o.activeOptionIndex.value===null||(u=o.options.value[o.activeOptionIndex.value])==null?void 0:u.id,"aria-multiselectable":o.mode.value===1?!0:void 0,"aria-labelledby":(i=E(o.buttonRef))==null?void 0:i.id,"aria-orientation":o.orientation.value,id:n,onKeydown:m,role:"listbox",tabIndex:0,ref:o.optionsRef};return J({ourProps:g,theirProps:S,slot:y,attrs:t,slots:l,features:ce.RenderStrategy|ce.Static,visible:v.value,name:"ListboxOptions"})}}}),kl=Y({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:t,attrs:l,expose:r}){var a;let n=(a=e.id)!=null?a:`headlessui-listbox-option-${ge()}`,o=re("ListboxOption"),c=L(null);r({el:c,$el:c});let m=T(()=>o.activeOptionIndex.value!==null?o.options.value[o.activeOptionIndex.value].id===n:!1),b=T(()=>R(o.mode.value,{0:()=>o.compare(A(o.value.value),A(e.value)),1:()=>A(o.value.value).some(s=>o.compare(A(s),A(e.value)))})),v=T(()=>R(o.mode.value,{1:()=>{var s;let p=A(o.value.value);return((s=o.options.value.find(k=>p.some(O=>o.compare(A(O),A(k.dataRef.value)))))==null?void 0:s.id)===n},0:()=>b.value})),u=cl(c),i=T(()=>({disabled:e.disabled,value:e.value,get textValue(){return u()},domRef:c}));le(()=>o.registerOption(n,i)),Xe(()=>o.unregisterOption(n)),le(()=>{Z([o.listboxState,b],()=>{o.listboxState.value===0&&b.value&&R(o.mode.value,{1:()=>{v.value&&o.goToOption(j.Specific,n)},0:()=>{o.goToOption(j.Specific,n)}})},{immediate:!0})}),oe(()=>{o.listboxState.value===0&&m.value&&o.activationTrigger.value!==0&&B(()=>{var s,p;return(p=(s=E(c))==null?void 0:s.scrollIntoView)==null?void 0:p.call(s,{block:"nearest"})})});function y(s){if(e.disabled)return s.preventDefault();o.select(e.value),o.mode.value===0&&(o.closeListbox(),B(()=>{var p;return(p=E(o.buttonRef))==null?void 0:p.focus({preventScroll:!0})}))}function S(){if(e.disabled)return o.goToOption(j.Nothing);o.goToOption(j.Specific,n)}let g=tl();function x(s){g.update(s)}function P(s){g.wasMoved(s)&&(e.disabled||m.value||o.goToOption(j.Specific,n,0))}function $(s){g.wasMoved(s)&&(e.disabled||m.value&&o.goToOption(j.Nothing))}return()=>{let{disabled:s}=e,p={active:m.value,selected:b.value,disabled:s},{value:k,disabled:O,..._}=e,F={id:n,ref:c,role:"option",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-selected":b.value,disabled:void 0,onClick:y,onFocus:S,onPointerenter:x,onMouseenter:x,onPointermove:P,onMousemove:P,onPointerleave:$,onMouseleave:$};return J({ourProps:F,theirProps:_,slot:p,attrs:l,slots:t,name:"ListboxOption"})}}});const hl={class:"relative"},wl={class:"inline-block w-full rounded-md shadow-sm"},Ol={class:"block truncate"},$l=f("span",{class:"absolute inset-y-0 right-0 flex items-center pr-2 ml-3 pointer-events-none"},[f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4 text-gray-400","aria-hidden":"true"},[f("path",{"fill-rule":"evenodd",d:"M5.22 10.22a.75.75 0 0 1 1.06 0L8 11.94l1.72-1.72a.75.75 0 1 1 1.06 1.06l-2.25 2.25a.75.75 0 0 1-1.06 0l-2.25-2.25a.75.75 0 0 1 0-1.06ZM10.78 5.78a.75.75 0 0 1-1.06 0L8 4.06 6.28 5.78a.75.75 0 0 1-1.06-1.06l2.25-2.25a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1 0 1.06Z","clip-rule":"evenodd"})])],-1),Sl={class:"absolute z-10 w-full mt-1 bg-white rounded-md shadow-lg"},Cl=f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4","aria-hidden":"true"},[f("path",{"fill-rule":"evenodd",d:"M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z","clip-rule":"evenodd"})],-1),Tl=[Cl],I=Object.assign({inheritAttrs:!1},{__name:"BaseListbox",props:Pe({options:{type:[Array],required:!0,default:()=>[]},errorMessage:{type:[String],default:null},isMultiple:{type:[Boolean],default:!1},isDisabled:{type:[Boolean],default:!1}},{modelValue:{type:[Array,String,Number]},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=je(e,"modelValue"),l=e,r=T(()=>{var c;return l.isMultiple?((c=t.value)==null?void 0:c.length)==0:!t.value}),a=T(()=>{var c,m;return r.value?"Please select an option":l.isMultiple?(c=t.value)==null?void 0:c.map(b=>b.name).join(", "):(m=t.value)==null?void 0:m.name}),n=T(()=>Fe("relative w-full max-w-[511px] rounded-md border cursor-default py-2.5 pl-3 pr-10 text-left transition duration-150 ease-in-out text-sm focus:ring-1",{variants:{empty:{true:"text-gray-400"}},compoundVariants:[{disabled:!0,error:!1,class:"text-nickel bg-persian cursor-not-allowed bg-gray-50 border-gray-300 text-gray-900"},{disabled:!0,error:!0,class:"text-nickel bg-persian cursor-not-allowed bg-gray-50 border-gray-300"},{disabled:!1,error:!0,class:"text-red-500 border-red-500 outline-red-500 focus:ring-red-500 focus:border-red-500"},{disabled:!1,error:!1,class:"text-gray-900 bg-white border-gray-300 cursor-pointer focus:ring-black focus:border-black"}],defaultVariants:{}})({empty:r.value,error:!!l.errorMessage,disabled:l.isDisabled})),o=T(()=>(c,m)=>({"relative py-2 pl-2 pr-4 mr-px cursor-default select-none":!0,"bg-gray-700 text-white":c&&m,"bg-gray-200":c&&!m,"text-white bg-gray-700":!c&&m,"text-gray-900":!c&&!m}));return(c,m)=>(h(),C(N,null,[w(d(gl),Ae({as:"div"},c.$attrs,{by:"id",disabled:e.isDisabled,multiple:e.isMultiple,modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=b=>t.value=b)}),{default:V(({open:b})=>[f("div",hl,[f("span",wl,[w(d(yl),{class:q(n.value)},{default:V(()=>[f("span",Ol,M(a.value),1),$l]),_:1},8,["class"])]),z(w(et,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:V(()=>[f("div",Sl,[w(d(xl),{class:"py-1 pl-px space-y-px overflow-auto text-base leading-6 rounded-md shadow-xs max-h-60 focus:outline-none sm:text-sm sm:leading-5",static:"static"},{default:V(()=>[(h(!0),C(N,null,W(e.options,v=>(h(),Q(d(kl),{key:v.id,value:v,onClick:c.onClick},{default:V(({selected:u,active:i})=>[f("div",{class:q(o.value(u,i))},[f("span",{class:q(["block text-left capitalize truncate",{"font-semibold":u,"font-normal":!u}])},M(v.name),3),u?(h(),C("span",{key:0,class:q(["absolute inset-y-0 right-0 flex items-center pr-4",{"text-white":i,"text-gray-900":!i}])},Tl,2)):Me("",!0)],2)]),_:2},1032,["value","onClick"]))),128))]),_:1})])]),_:2},1536),[[te,b]])])]),_:1},16,["disabled","multiple","modelValue"]),z(f("p",{class:"mt-2 text-sm text-red-600"},M(e.errorMessage),513),[[te,e.errorMessage]])],64))}}),Vl=["disabled"],Qe=Object.assign({inheritAttrs:!1},{__name:"BaseTextarea",props:Pe({isDisabled:{type:[Boolean],default:!1},errorMessage:{type:[String]}},{modelValue:{type:[String]},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=je(e,"modelValue"),l=e,r=T(()=>Fe("block appearance-none resize-none p-2.5 w-full text-sm rounded-md shadow-sm",{variants:{},compoundVariants:[{disabled:!0,error:!1,class:"text-nickel bg-persian cursor-not-allowed bg-gray-50 border-gray-300 text-gray-900"},{disabled:!0,error:!0,class:"text-nickel bg-persian cursor-not-allowed bg-gray-50 border-gray-300"},{disabled:!1,error:!0,class:"text-red-500 border-red-500 outline-red-500 focus:ring-red-500 focus:border-red-500"},{disabled:!1,error:!1,class:"text-gray-900 bg-white border-gray-300 cursor-pointer focus:ring-black focus:border-black"}],defaultVariants:{}})({error:!!l.errorMessage,disabled:l.isDisabled}));return(a,n)=>(h(),C(N,null,[z(f("textarea",Ae(a.$attrs,{"onUpdate:modelValue":n[0]||(n[0]=o=>t.value=o),rows:"6",class:r.value,disabled:e.isDisabled}),null,16,Vl),[[De,t.value]]),z(f("p",{class:"mt-1 text-sm text-red-600"},M(e.errorMessage),513),[[te,e.errorMessage]])],64))}}),Ll=f("h3",{class:"text-lg font-medium text-gray-900"}," Add Ticket ",-1),El=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Description ",-1),Dl={key:0},_l=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Agent ",-1),Pl=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Labels ",-1),jl=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Categories ",-1),Ml=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Priority ",-1),Al=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Status ",-1),Nl={__name:"CreateTicketModal",props:{labels:{type:[Object],default:()=>[]},categories:{type:[Object],default:()=>[]},agents:{type:[Object],default:()=>[]}},setup(e){const t=fe({title:"",description:"",labels:[],categories:[],agent_id:null,status:{id:"open",name:"Open"},priority:{id:"low",name:"Low"}}),l=ae(),{createTicketModalOpen:r}=ne(l);function a(){t.transform(u=>{var i,y,S;return{...u,agent_id:(i=u.agent_id)==null?void 0:i.id,labels:u.labels.map(({id:g})=>g),categories:u.categories.map(({id:g})=>g),status:(y=u.status)==null?void 0:y.id,priority:(S=u.priority)==null?void 0:S.id}}).post(route("tickets.store"),{preserveScroll:!0,onSuccess:()=>{r.value=!1,ve().add({type:"success",message:"Ticket created successfully"}),t.reset()}})}const n=[{id:"low",name:"Low"},{id:"medium",name:"Medium"},{id:"high",name:"High"}],o=[{id:"open",name:"Open"},{id:"closed",name:"Closed"}],c=T(()=>Le().props.auth.roles),{hasRole:m}=Ee({roles:c.value}),b=m.value("admin"),v=L(null);return Z(r,u=>{u&&setTimeout(()=>{v.value.focus()},0)}),(u,i)=>(h(),Q(be,{"is-open":d(r),"onUpdate:isOpen":i[15]||(i[15]=y=>me(r)?r.value=y:null),onOnClose:i[16]||(i[16]=y=>r.value=!1)},{header:V(()=>[Ll]),footer:V(()=>[w(H,{variant:"secondary",onClick:i[14]||(i[14]=y=>r.value=!1)},{default:V(()=>[U(" Cancel ")]),_:1}),w(H,{form:"create-ticket-form",type:"submit",isLoading:d(t).processing},{default:V(()=>[U(" Create ")]),_:1},8,["isLoading"])]),default:V(()=>[f("form",{id:"create-ticket-form",class:"grid gap-6",novalidate:"",onSubmit:Ne(a,["prevent"])},[f("div",null,[w(Re,{ref_key:"input",ref:v,label:"Title",id:"create-ticket-name",type:"text",modelValue:d(t).title,"onUpdate:modelValue":i[0]||(i[0]=y=>d(t).title=y),"error-message":d(t).errors.title,onFocus:i[1]||(i[1]=y=>d(t).clearErrors("title"))},null,8,["modelValue","error-message"])]),f("div",null,[El,w(Qe,{modelValue:d(t).description,"onUpdate:modelValue":i[2]||(i[2]=y=>d(t).description=y),"error-message":d(t).errors.description,onFocus:i[3]||(i[3]=y=>d(t).clearErrors("description"))},null,8,["modelValue","error-message"])]),d(b)?(h(),C("div",Dl,[_l,w(I,{modelValue:d(t).agent_id,"onUpdate:modelValue":i[4]||(i[4]=y=>d(t).agent_id=y),options:e.agents,"error-message":d(t).errors.agent_id,onClick:i[5]||(i[5]=y=>d(t).clearErrors("agent_id"))},null,8,["modelValue","options","error-message"])])):Me("",!0),f("div",null,[Pl,w(I,{"is-multiple":"",modelValue:d(t).labels,"onUpdate:modelValue":i[6]||(i[6]=y=>d(t).labels=y),options:e.labels,"error-message":d(t).errors.labels,onClick:i[7]||(i[7]=y=>d(t).clearErrors("labels"))},null,8,["modelValue","options","error-message"])]),f("div",null,[jl,w(I,{"is-multiple":"",modelValue:d(t).categories,"onUpdate:modelValue":i[8]||(i[8]=y=>d(t).categories=y),options:e.categories,"error-message":d(t).errors.categories,onClick:i[9]||(i[9]=y=>d(t).clearErrors("categories"))},null,8,["modelValue","options","error-message"])]),f("div",null,[Ml,w(I,{modelValue:d(t).priority,"onUpdate:modelValue":i[10]||(i[10]=y=>d(t).priority=y),options:n,"error-message":d(t).errors.priority,onFocus:i[11]||(i[11]=y=>d(t).clearErrors("priority"))},null,8,["modelValue","error-message"])]),f("div",null,[Al,w(I,{modelValue:d(t).status,"onUpdate:modelValue":i[12]||(i[12]=y=>d(t).status=y),options:o,"error-message":d(t).errors.status,onClick:i[13]||(i[13]=y=>d(t).clearErrors("status"))},null,8,["modelValue","error-message"])])],32)]),_:1},8,["is-open"]))}},Rl=f("h3",{class:"text-lg font-medium text-gray-900"}," Edit Ticket ",-1),Fl=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Description ",-1),Il=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Agent ",-1),Ul=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Labels ",-1),Bl=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Categories ",-1),Hl=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Priority ",-1),ql=f("div",{class:"block mb-2 text-sm font-medium text-gray-900"}," Status ",-1),zl={__name:"EditTicketModal",props:{ticket:{type:[Object],required:!0},labels:{type:[Object],default:()=>[]},categories:{type:[Object],default:()=>[]},agents:{type:[Object],default:()=>[]}},setup(e){var b,v,u,i,y,S,g,x,P;const t=e,l=fe({...t.ticket,agent_id:(b=t.ticket)==null?void 0:b.agent,status:{id:(v=t.ticket)==null?void 0:v.status,name:((u=t.ticket)==null?void 0:u.status.at(0).toUpperCase())+((i=t.ticket)==null?void 0:i.status.slice(1))},priority:{id:(y=t.ticket)==null?void 0:y.priority,name:((S=t.ticket)==null?void 0:S.priority.at(0).toUpperCase())+((g=t.ticket)==null?void 0:g.priority.slice(1))},labels:(x=t.ticket)==null?void 0:x.labels.map(({id:$,title:s})=>({id:$,name:s})),categories:(P=t.ticket)==null?void 0:P.categories.map(({id:$,title:s})=>({id:$,name:s}))});Z(()=>t.ticket,$=>{var s,p,k,O,_,F,K,X,ke;l.defaults({...$,agent_id:(s=t.ticket)==null?void 0:s.agent,status:{id:(p=t.ticket)==null?void 0:p.status,name:((k=t.ticket)==null?void 0:k.status.at(0).toUpperCase())+((O=t.ticket)==null?void 0:O.status.slice(1))},priority:{id:(_=t.ticket)==null?void 0:_.priority,name:((F=t.ticket)==null?void 0:F.priority.at(0).toUpperCase())+((K=t.ticket)==null?void 0:K.priority.slice(1))},labels:(X=t.ticket)==null?void 0:X.labels.map(({id:se,title:ie})=>({id:se,name:ie})),categories:(ke=t.ticket)==null?void 0:ke.categories.map(({id:se,title:ie})=>({id:se,name:ie}))}).reset()});const r=ae(),{editTicketModalOpen:a}=ne(r);function n(){l.transform($=>{var s,p,k;return{...$,agent_id:(s=$.agent_id)==null?void 0:s.id,labels:$.labels.map(({id:O})=>O),categories:$.categories.map(({id:O})=>O),status:(p=$.status)==null?void 0:p.id,priority:(k=$.priority)==null?void 0:k.id}}).patch(route("tickets.update",{ticket:t.ticket}),{preserveScroll:!0,onSuccess:()=>{a.value=!1,ve().add({type:"success",message:"Ticket updated successfully"}),l.reset()}})}const o=[{id:"low",name:"Low"},{id:"medium",name:"Medium"},{id:"high",name:"High"}],c=[{id:"open",name:"Open"},{id:"closed",name:"Closed"}],m=L(null);return Z(a,$=>{$&&setTimeout(()=>{m.value.focus()},0)}),($,s)=>(h(),Q(be,{"is-open":d(a),"onUpdate:isOpen":s[15]||(s[15]=p=>me(a)?a.value=p:null),onOnClose:s[16]||(s[16]=p=>a.value=!1)},{header:V(()=>[Rl]),footer:V(()=>[w(H,{variant:"secondary",onClick:s[14]||(s[14]=p=>a.value=!1)},{default:V(()=>[U(" Cancel ")]),_:1}),w(H,{form:"edit-ticket-form",type:"submit",isLoading:d(l).processing},{default:V(()=>[U(" Save ")]),_:1},8,["isLoading"])]),default:V(()=>[f("form",{id:"edit-ticket-form",class:"grid gap-6",novalidate:"",onSubmit:Ne(n,["prevent"])},[f("div",null,[w(Re,{ref_key:"input",ref:m,label:"Title",id:"edit-ticket-name",type:"text",modelValue:d(l).title,"onUpdate:modelValue":s[0]||(s[0]=p=>d(l).title=p),"error-message":d(l).errors.title,onFocus:s[1]||(s[1]=p=>d(l).clearErrors("title"))},null,8,["modelValue","error-message"])]),f("div",null,[Fl,w(Qe,{modelValue:d(l).description,"onUpdate:modelValue":s[2]||(s[2]=p=>d(l).description=p),"error-message":d(l).errors.description,onFocus:s[3]||(s[3]=p=>d(l).clearErrors("description"))},null,8,["modelValue","error-message"])]),f("div",null,[Il,w(I,{modelValue:d(l).agent_id,"onUpdate:modelValue":s[4]||(s[4]=p=>d(l).agent_id=p),options:e.agents,"error-message":d(l).errors.agent_id,onClick:s[5]||(s[5]=p=>d(l).clearErrors("agent_id"))},null,8,["modelValue","options","error-message"])]),f("div",null,[Ul,w(I,{"is-multiple":"",modelValue:d(l).labels,"onUpdate:modelValue":s[6]||(s[6]=p=>d(l).labels=p),options:e.labels,"error-message":d(l).errors.labels,onClick:s[7]||(s[7]=p=>d(l).clearErrors("labels"))},null,8,["modelValue","options","error-message"])]),f("div",null,[Bl,w(I,{"is-multiple":"",modelValue:d(l).categories,"onUpdate:modelValue":s[8]||(s[8]=p=>d(l).categories=p),options:e.categories,"error-message":d(l).errors.categories,onClick:s[9]||(s[9]=p=>d(l).clearErrors("categories"))},null,8,["modelValue","options","error-message"])]),f("div",null,[Hl,w(I,{modelValue:d(l).priority,"onUpdate:modelValue":s[10]||(s[10]=p=>d(l).priority=p),options:o,"error-message":d(l).errors.priority,onFocus:s[11]||(s[11]=p=>d(l).clearErrors("priority"))},null,8,["modelValue","error-message"])]),f("div",null,[ql,w(I,{modelValue:d(l).status,"onUpdate:modelValue":s[12]||(s[12]=p=>d(l).status=p),options:c,"error-message":d(l).errors.status,onClick:s[13]||(s[13]=p=>d(l).clearErrors("status"))},null,8,["modelValue","error-message"])])],32)]),_:1},8,["is-open"]))}},Kl=f("h3",{class:"text-lg font-medium text-gray-900"}," Delete ticket ",-1),Wl=f("div",null,[f("p",{class:"text-sm text-gray-600"}," This action cannot be undone. Do you want to proceed with the deletion? ")],-1),Zl={__name:"DeleteTicketModal",props:{ticket:{type:[Object],required:!0,default:()=>({})}},setup(e){const t=e,l=fe({}),r=ae(),{deleteTicketModalOpen:a}=ne(r);function n(){const o=route("tickets.destroy",{ticket:t.ticket});l.delete(o,{preserveScroll:!0,onSuccess:()=>{a.value=!1,ve().add({type:"success",message:"Ticket deleted successfully"}),l.reset()}})}return(o,c)=>(h(),Q(be,{"is-open":d(a),"onUpdate:isOpen":c[1]||(c[1]=m=>me(a)?a.value=m:null),onOnClose:c[2]||(c[2]=m=>a.value=!1)},{header:V(()=>[Kl]),footer:V(()=>[w(H,{variant:"secondary",onClick:c[0]||(c[0]=m=>a.value=!1)},{default:V(()=>[U(" Cancel ")]),_:1}),w(H,{onClick:n,variant:"danger",class:"ms-3","is-loading":d(l).processing},{default:V(()=>[U(" Delete ")]),_:1},8,["is-loading"])]),default:V(()=>[Wl]),_:1},8,["is-open"]))}},lo={__name:"Index",props:{tickets:{type:[Object],default:()=>[]},labels:{type:[Object],default:()=>[]},categories:{type:[Object],default:()=>[]},agents:{type:[Object],default:()=>[]},filters:{type:[Object]}},setup(e){const t=[{label:"Title",key:"title"},{label:"Status",key:"status"},{label:"Priority",key:"priority"},{label:"Categories",key:"categories"},{label:"Labels",key:"labels"},{label:"Assigned To",key:"agent"},{label:"Actions",key:"actions"}],l=ae(),{createTicketModalOpen:r,editTicketModalOpen:a,deleteTicketModalOpen:n}=ne(l),o=L();function c(u){o.value=u}function m(){r.value=!0}function b(u){a.value=!0,c(u)}function v(u){n.value=!0,c(u)}return(u,i)=>{const y=he("Head"),S=he("AuthenticatedLayout");return h(),C(N,null,[w(y,{title:"Tickets"}),w(S,null,{default:V(()=>[w(d(At),{"table-id":"tickets",placeholder:"Search",headers:t,data:e.tickets,route:"tickets.index",filters:e.filters,onOnCreate:m,onOnEdit:b,onOnDelete:v},{button:V(()=>[U(" Add ")]),_:1},8,["data","filters"])]),_:1}),w(d(Nl),{labels:e.labels,categories:e.categories,agents:e.agents},null,8,["labels","categories","agents"]),w(d(zl),{ticket:o.value,labels:e.labels,categories:e.categories,agents:e.agents},null,8,["ticket","labels","categories","agents"]),w(d(Zl),{ticket:o.value},null,8,["ticket"])],64)}}};export{lo as default};
